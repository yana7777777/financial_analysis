{% extends 'skills/base.html' %}

{% block content %}
<div class="container mt-4">
    <h2>–†–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏: {{ document.title }}</h2>
    <p class="text-muted">–¢–∏–ø: {{ document.get_document_type_display }}</p>
    
    <div class="alert alert-info">
        <h5>üìã –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:</h5>
        <ol>
            <li>–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–µ–∫—Å—Ç –Ω–∏–∂–µ</li>
            <li>–ü–æ–∫–∞–∂–∏—Ç–µ –µ–≥–æ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞</li>
            <li>–ú—ã –∞–¥–∞–ø—Ç–∏—Ä—É–µ–º –∞–Ω–∞–ª–∏–∑ –ø–æ–¥ –≤–∞—à —Ñ–æ—Ä–º–∞—Ç –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤</li>
        </ol>
    </div>
    
    <div class="card">
        <div class="card-header bg-dark text-white">
            <h5>–¢–µ–∫—Å—Ç –∏–∑ PDF (–ø–µ—Ä–≤—ã–µ 5000 —Å–∏–º–≤–æ–ª–æ–≤)</h5>
        </div>
        <div class="card-body">
            <pre style="max-height: 500px; overflow: auto; background: #f8f9fa; padding: 15px; border-radius: 5px;">{{ pdf_text }}</pre>
        </div>
    </div>
    
    <div class="mt-3">
        <button onclick="copyToClipboard()" class="btn btn-success">
            üìã –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—Å—Ç
        </button>
        <a href="{% url 'financial_results' document.id %}" class="btn btn-primary">
            ‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º
        </a>
        <a href="{% url 'financial_upload' %}" class="btn btn-secondary">
            üìä –ó–∞–≥—Ä—É–∑–∏—Ç—å –¥—Ä—É–≥–æ–π –¥–æ–∫—É–º–µ–Ω—Ç
        </a>
    </div>
</div>

<script>
function copyToClipboard() {
    const text = document.querySelector('pre').innerText;
    navigator.clipboard.writeText(text).then(() => {
        alert('–¢–µ–∫—Å—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞!');
    }).catch(err => {
        console.error('–û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è: ', err);
    });
}
</script>
{% endblock %}