{% extends 'skills/base.html' %}
{% load static %}

{% block content %}

<div class="todos-container">
    <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
    <div class="todos-header">
        <h1 class="todos-title">‚úÖ –ó–∞–¥–∞—á–∏</h1>
        <div class="todos-count">–í—Å–µ–≥–æ –∑–∞–¥–∞—á: {{ todos.count }}</div>
    </div>

    <!-- –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π -->
    <div class="todos-actions">
        <a href="{% url 'createtodo' %}" class="action-btn create-btn">
            ‚ûï –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∑–∞–¥–∞—á—É
        </a>
        <a href="{% url 'completedtodos' %}" class="action-btn completed-btn">
            ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏
        </a>
    </div>

    <!-- –°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á –≤ –≤–∏–¥–µ —Å—Ç—Ä–æ–∫ -->
    <div class="todos-list">
        {% for todo in todos %}
        <div class="todo-row {% if todo.important %}todo-important{% endif %} {% if todo.completed %}todo-completed{% endif %}">
            <div class="todo-info">
                <div class="todo-main">
                    <h3 class="todo-title">
                        <a href="{% url 'viewtodo' todo.id %}" class="todo-link">
                            {% if todo.important %}‚≠ê {% endif %}{{ todo.title }}
                        </a>
                    </h3>
                    {% if todo.memo %}
                    <p class="todo-memo">{{ todo.memo|striptags|truncatechars:200 }}</p>
                    {% endif %}
                </div>

                <div class="todo-meta">
                    <span class="todo-date">üìÖ {{ todo.date|date:'d.m.Y' }}</span>
                    {% if todo.completed %}
                    <span class="todo-status completed">‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ</span>
                    {% else %}
                    <span class="todo-status pending">‚è≥ –í —Ä–∞–±–æ—Ç–µ</span>
                    {% endif %}
                </div>
            </div>

            <div class="todo-actions">
                <a href="{% url 'viewtodo' todo.id %}" class="btn view-btn" title="–ü—Ä–æ—Å–º–æ—Ç—Ä">
                    üëÅÔ∏è
                </a>

                {% if not todo.completed %}
                <form action="{% url 'completetodo' todo.id %}" method="POST" class="todo-form">
                    {% csrf_token %}
                    <button type="submit" class="btn complete-btn" title="–ó–∞–≤–µ—Ä—à–∏—Ç—å –∑–∞–¥–∞—á—É">
                        ‚úÖ
                    </button>
                </form>
                {% endif %}

                <form action="{% url 'deletetodo' todo.id %}" method="POST" class="todo-form">
                    {% csrf_token %}
                    <button type="submit" class="btn delete-btn" title="–£–¥–∞–ª–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É">
                        üóëÔ∏è
                    </button>
                </form>
            </div>
        </div>
        {% empty %}
        <div class="no-todos">
            <div class="empty-icon">üìù</div>
            <h3>–ù–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–¥–∞—á</h3>
            <p>–°–æ–∑–¥–∞–π—Ç–µ —Å–≤–æ—é –ø–µ—Ä–≤—É—é –∑–∞–¥–∞—á—É –∏–ª–∏ –ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ</p>
            <div class="empty-actions">
                <a href="{% url 'createtodo' %}" class="btn create-btn">
                    ‚ûï –°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É
                </a>
                <a href="{% url 'completedtodos' %}" class="btn completed-btn">
                    ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ
                </a>
            </div>
        </div>
        {% endfor %}
    </div>

    <!-- –ö–Ω–æ–ø–∫–∞ –∫–æ—Ä–∑–∏–Ω—ã -->
    <div class="trash-section">
        <a href="{% url 'trashbin' %}" class="trash-btn">
            üóëÔ∏è –ü—Ä–æ—Å–º–æ—Ç—Ä –ö–æ—Ä–∑–∏–Ω—ã (—É–¥–∞–ª–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏)
        </a>
    </div>
</div>

{% endblock %}



